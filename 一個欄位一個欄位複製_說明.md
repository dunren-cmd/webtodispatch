# ä¸€å€‹æ¬„ä½ä¸€å€‹æ¬„ä½è¤‡è£½çš„èªªæ˜

## ğŸ¯ æœ€å®‰å…¨çš„æ–¹æ³•ï¼šä¸€æ¬¡åªæ›´æ–°ä¸€å€‹æ¬„ä½

é€™å€‹æ–¹æ³•æœ€å®‰å…¨ï¼Œæ¯æ¬¡åªæ›´æ–°ä¸€å€‹æ¬„ä½ï¼Œä¸å®¹æ˜“å‡ºéŒ¯ã€‚

---

## ğŸ“‹ åŸ·è¡Œæ­¥é©Ÿ

### æ­¥é©Ÿ 1ï¼šè¨­å®šï¼ˆåªéœ€è¦åŸ·è¡Œä¸€æ¬¡ï¼‰

```sql
ALTER TABLE users ADD COLUMN IF NOT EXISTS mail TEXT;
```

### æ­¥é©Ÿ 2ï¼šæŸ¥çœ‹è¦è¤‡è£½çš„è³‡æ–™

```sql
SELECT 
  id,
  name,
  "JobTitle",
  "Mail"
FROM "PersonnelData"
ORDER BY id;
```

è¨˜ä¸‹è¦è¤‡è£½çš„è³‡æ–™ã€‚

---

### æ­¥é©Ÿ 3ï¼šåªè¤‡è£½ name æ¬„ä½

ä¸€æ¬¡æ›´æ–°ä¸€ç­†ï¼š

```sql
UPDATE users 
SET name = 'ç¨‹äºå®£'  -- æ”¹æˆ PersonnelData çš„ name
WHERE id = 1234567890;  -- æ”¹æˆ PersonnelData çš„ id
```

æˆ–è€…ä¸€æ¬¡æ›´æ–°æ‰€æœ‰ï¼ˆå¦‚æœ id éƒ½å°æ‡‰ï¼‰ï¼š

```sql
UPDATE users u
SET name = p.name
FROM "PersonnelData" p
WHERE u.id = p.id;
```

---

### æ­¥é©Ÿ 4ï¼šåªè¤‡è£½ role æ¬„ä½

ä¸€æ¬¡æ›´æ–°ä¸€ç­†ï¼š

```sql
UPDATE users 
SET role = 'è­·ç†å¸«'  -- æ”¹æˆ PersonnelData çš„ JobTitle
WHERE id = 1234567890;  -- æ”¹æˆ PersonnelData çš„ id
```

æˆ–è€…ä¸€æ¬¡æ›´æ–°æ‰€æœ‰ï¼š

```sql
UPDATE users u
SET role = p."JobTitle"
FROM "PersonnelData" p
WHERE u.id = p.id;
```

---

### æ­¥é©Ÿ 5ï¼šåªè¤‡è£½ mail æ¬„ä½

ä¸€æ¬¡æ›´æ–°ä¸€ç­†ï¼š

```sql
UPDATE users 
SET mail = 'shan3636@gmail.com'  -- æ”¹æˆ PersonnelData çš„ Mail
WHERE id = 1234567890;  -- æ”¹æˆ PersonnelData çš„ id
```

æˆ–è€…ä¸€æ¬¡æ›´æ–°æ‰€æœ‰ï¼š

```sql
UPDATE users u
SET mail = p."Mail"
FROM "PersonnelData" p
WHERE u.id = p.id;
```

---

### æ­¥é©Ÿ 6ï¼šé©—è­‰

```sql
SELECT 
  id,
  name,
  role,
  mail
FROM users
ORDER BY id;
```

---

## ğŸ“ å®Œæ•´ç¯„ä¾‹ï¼šä¸€æ¬¡æ›´æ–°ä¸€å€‹æ¬„ä½

å‡è¨­ PersonnelData æœ‰ 3 ç­†è³‡æ–™ï¼š

### ç¬¬ä¸€ç­†ï¼šåªæ›´æ–° name

```sql
UPDATE users 
SET name = 'ç¨‹äºå®£'
WHERE id = 1234567890;
```

### ç¬¬ä¸€ç­†ï¼šåªæ›´æ–° role

```sql
UPDATE users 
SET role = 'è­·ç†å¸«'
WHERE id = 1234567890;
```

### ç¬¬ä¸€ç­†ï¼šåªæ›´æ–° mail

```sql
UPDATE users 
SET mail = 'shan3636@gmail.com'
WHERE id = 1234567890;
```

ç„¶å¾Œé‡è¤‡è™•ç†ç¬¬äºŒç­†ã€ç¬¬ä¸‰ç­†...

---

## ğŸš€ å¿«é€Ÿæ–¹æ³•ï¼šä¸€æ¬¡æ›´æ–°æ‰€æœ‰è¨˜éŒ„çš„åŒä¸€æ¬„ä½

å¦‚æœæƒ³ä¸€æ¬¡æ›´æ–°æ‰€æœ‰è¨˜éŒ„çš„åŒä¸€å€‹æ¬„ä½ï¼š

### æ›´æ–°æ‰€æœ‰ name

```sql
UPDATE users u
SET name = p.name
FROM "PersonnelData" p
WHERE u.id = p.id;
```

### æ›´æ–°æ‰€æœ‰ role

```sql
UPDATE users u
SET role = p."JobTitle"
FROM "PersonnelData" p
WHERE u.id = p.id;
```

### æ›´æ–°æ‰€æœ‰ mail

```sql
UPDATE users u
SET mail = p."Mail"
FROM "PersonnelData" p
WHERE u.id = p.id;
```

---

## âš ï¸ æ³¨æ„äº‹é …

1. **å…ˆç¢ºèª id å°æ‡‰**ï¼šç¢ºä¿ users è¡¨å’Œ PersonnelData è¡¨çš„ id èƒ½å°æ‡‰
2. **ä¸€æ¬¡ä¸€å€‹æ¬„ä½**ï¼šå®Œæˆä¸€å€‹æ¬„ä½å¾Œï¼Œå†è™•ç†ä¸‹ä¸€å€‹
3. **é©—è­‰çµæœ**ï¼šæ¯æ›´æ–°ä¸€å€‹æ¬„ä½å¾Œï¼Œå¯ä»¥åŸ·è¡Œé©—è­‰æŸ¥è©¢ç¢ºèª

---

## âœ… åŸ·è¡Œé †åºå»ºè­°

1. **å…ˆåŸ·è¡Œ**ï¼šæ·»åŠ  mail æ¬„ä½
2. **ç„¶å¾ŒåŸ·è¡Œ**ï¼šæŸ¥çœ‹ PersonnelData çš„è³‡æ–™
3. **æ›´æ–° name**ï¼šä¸€æ¬¡æ›´æ–°ä¸€ç­†æˆ–å…¨éƒ¨
4. **æ›´æ–° role**ï¼šä¸€æ¬¡æ›´æ–°ä¸€ç­†æˆ–å…¨éƒ¨
5. **æ›´æ–° mail**ï¼šä¸€æ¬¡æ›´æ–°ä¸€ç­†æˆ–å…¨éƒ¨
6. **æœ€å¾Œé©—è­‰**ï¼šç¢ºèªæ‰€æœ‰æ¬„ä½éƒ½è¤‡è£½æˆåŠŸ

---

## ğŸ’¡ å°æŠ€å·§

### æŸ¥çœ‹å“ªäº›è¨˜éŒ„éœ€è¦æ›´æ–°

```sql
SELECT 
  u.id,
  u.name as current_name,
  p.name as new_name,
  u.role as current_role,
  p."JobTitle" as new_role,
  u.mail as current_mail,
  p."Mail" as new_mail
FROM users u
JOIN "PersonnelData" p ON u.id = p.id;
```

é€™æ¨£å¯ä»¥çœ‹åˆ°ç›®å‰çš„å€¼å’Œè¦æ›´æ–°çš„å€¼ï¼Œæ–¹ä¾¿ç¢ºèªã€‚
