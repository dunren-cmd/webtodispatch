# ä¸€æ¬¡æ›´æ–°ä¸€å€‹æ¬„ä½ï¼Œæ›´æ–°æ‰€æœ‰è³‡æ–™ï¼ˆ1-200 ç­†ï¼‰

## ğŸ¯ æ–¹æ³•èªªæ˜

ä¸€æ¬¡åŸ·è¡Œä¸€å€‹ SQLï¼Œæ›´æ–°æ‰€æœ‰è¨˜éŒ„ï¼ˆ1-200 ç­†ï¼‰çš„åŒä¸€å€‹æ¬„ä½ã€‚

---

## ğŸ“‹ åŸ·è¡Œæ­¥é©Ÿ

### æ­¥é©Ÿ 1ï¼šè¨­å®šï¼ˆåªéœ€è¦åŸ·è¡Œä¸€æ¬¡ï¼‰

```sql
ALTER TABLE users ADD COLUMN IF NOT EXISTS mail TEXT;
```

---

### æ­¥é©Ÿ 2ï¼šæŸ¥çœ‹è¦è¤‡è£½çš„è³‡æ–™

```sql
SELECT 
  id,
  name,
  role,  -- å·²æ”¹åç‚º role
  "Mail"
FROM "PersonnelData"
ORDER BY id;
```

---

### æ­¥é©Ÿ 3ï¼šåªæ›´æ–° name æ¬„ä½ï¼ˆæ›´æ–°æ‰€æœ‰è¨˜éŒ„ï¼‰

```sql
UPDATE users u
SET name = p.name
FROM "PersonnelData" p
WHERE u.id = p.id;
```

é€™æœƒä¸€æ¬¡æ›´æ–°æ‰€æœ‰è¨˜éŒ„çš„ `name` æ¬„ä½ã€‚

**é©—è­‰**ï¼š
```sql
SELECT 
  u.id,
  u.name as users_name,
  p.name as personnel_name,
  CASE 
    WHEN u.name = p.name THEN 'âœ… æˆåŠŸ'
    ELSE 'âŒ å¤±æ•—'
  END as status
FROM users u
JOIN "PersonnelData" p ON u.id = p.id
ORDER BY u.id
LIMIT 10;
```

---

### æ­¥é©Ÿ 4ï¼šåªæ›´æ–° role æ¬„ä½ï¼ˆæ›´æ–°æ‰€æœ‰è¨˜éŒ„ï¼‰

```sql
UPDATE users u
SET role = p.role  -- PersonnelData çš„æ¬„ä½åç¨±å·²æ”¹ç‚º role
FROM "PersonnelData" p
WHERE u.id = p.id;
```

é€™æœƒä¸€æ¬¡æ›´æ–°æ‰€æœ‰è¨˜éŒ„çš„ `role` æ¬„ä½ã€‚

**é©—è­‰**ï¼š
```sql
SELECT 
  u.id,
  u.role as users_role,
  p.role as personnel_role,
  CASE 
    WHEN u.role = p.role THEN 'âœ… æˆåŠŸ'
    ELSE 'âŒ å¤±æ•—'
  END as status
FROM users u
JOIN "PersonnelData" p ON u.id = p.id
ORDER BY u.id
LIMIT 10;
```

---

### æ­¥é©Ÿ 5ï¼šåªæ›´æ–° mail æ¬„ä½ï¼ˆæ›´æ–°æ‰€æœ‰è¨˜éŒ„ï¼‰

```sql
UPDATE users u
SET mail = p."Mail"
FROM "PersonnelData" p
WHERE u.id = p.id;
```

é€™æœƒä¸€æ¬¡æ›´æ–°æ‰€æœ‰è¨˜éŒ„çš„ `mail` æ¬„ä½ã€‚

**é©—è­‰**ï¼š
```sql
SELECT 
  u.id,
  u.mail as users_mail,
  p."Mail" as personnel_mail,
  CASE 
    WHEN u.mail = p."Mail" THEN 'âœ… æˆåŠŸ'
    ELSE 'âŒ å¤±æ•—'
  END as status
FROM users u
JOIN "PersonnelData" p ON u.id = p.id
ORDER BY u.id
LIMIT 10;
```

---

### æ­¥é©Ÿ 6ï¼šæœ€çµ‚é©—è­‰

æŸ¥çœ‹æ‰€æœ‰è¨˜éŒ„çš„æ›´æ–°çµæœï¼š

```sql
SELECT 
  u.id,
  u.name,
  u.role,
  u.mail,
  p.name as personnel_name,
  p.role as personnel_role,
  p."Mail" as personnel_mail,
  CASE 
    WHEN u.name = p.name AND u.role = p.role AND u.mail = p."Mail" THEN 'âœ… å…¨éƒ¨æˆåŠŸ'
    WHEN u.name = p.name AND u.role = p.role THEN 'âš ï¸ mail æœªæ›´æ–°'
    WHEN u.name = p.name THEN 'âš ï¸ role å’Œ mail æœªæ›´æ–°'
    ELSE 'âŒ æœªæ›´æ–°'
  END as status
FROM users u
JOIN "PersonnelData" p ON u.id = p.id
ORDER BY u.id;
```

çµ±è¨ˆæ›´æ–°çµæœï¼š

```sql
SELECT 
  COUNT(*) as total_records,
  COUNT(CASE WHEN u.name = p.name THEN 1 END) as name_updated,
  COUNT(CASE WHEN u.role = p.role THEN 1 END) as role_updated,
  COUNT(CASE WHEN u.mail = p."Mail" THEN 1 END) as mail_updated,
  COUNT(CASE WHEN u.name = p.name AND u.role = p.role AND u.mail = p."Mail" THEN 1 END) as all_updated
FROM users u
JOIN "PersonnelData" p ON u.id = p.id;
```

---

## âœ… åŸ·è¡Œé †åº

1. **æ­¥é©Ÿ 1**ï¼šæ·»åŠ  mail æ¬„ä½ï¼ˆåªéœ€è¦ä¸€æ¬¡ï¼‰
2. **æ­¥é©Ÿ 2**ï¼šæŸ¥çœ‹ PersonnelData çš„è³‡æ–™ï¼ˆç¢ºèªï¼‰
3. **æ­¥é©Ÿ 3**ï¼šæ›´æ–°æ‰€æœ‰è¨˜éŒ„çš„ name æ¬„ä½
4. **æ­¥é©Ÿ 4**ï¼šæ›´æ–°æ‰€æœ‰è¨˜éŒ„çš„ role æ¬„ä½
5. **æ­¥é©Ÿ 5**ï¼šæ›´æ–°æ‰€æœ‰è¨˜éŒ„çš„ mail æ¬„ä½
6. **æ­¥é©Ÿ 6**ï¼šæœ€çµ‚é©—è­‰

---

## ğŸ’¡ å„ªé»

1. **ä¸€æ¬¡æ›´æ–°ä¸€å€‹æ¬„ä½**ï¼šå¦‚æœå‡ºéŒ¯ï¼Œå®¹æ˜“çŸ¥é“æ˜¯å“ªå€‹æ¬„ä½æœ‰å•é¡Œ
2. **æ›´æ–°æ‰€æœ‰è¨˜éŒ„**ï¼šä¸€æ¬¡åŸ·è¡Œå°±èƒ½æ›´æ–° 1-200 ç­†è³‡æ–™
3. **æœ‰é©—è­‰æ­¥é©Ÿ**ï¼šæ¯å€‹æ¬„ä½æ›´æ–°å¾Œéƒ½å¯ä»¥é©—è­‰
4. **å®‰å…¨**ï¼šä¸€æ¬¡åªè™•ç†ä¸€å€‹æ¬„ä½ï¼Œä¸æœƒä¸€æ¬¡æ”¹å¤ªå¤šæ±è¥¿

---

## âš ï¸ æ³¨æ„äº‹é …

1. **ç¢ºä¿ id å°æ‡‰**ï¼šusers è¡¨å’Œ PersonnelData è¡¨çš„ id å¿…é ˆèƒ½å°æ‡‰
2. **æŒ‰é †åºåŸ·è¡Œ**ï¼šå…ˆæ›´æ–° nameï¼Œå†æ›´æ–° roleï¼Œæœ€å¾Œæ›´æ–° mail
3. **æ¯æ­¥é©—è­‰**ï¼šæ¯å€‹æ¬„ä½æ›´æ–°å¾Œï¼ŒåŸ·è¡Œé©—è­‰æŸ¥è©¢ç¢ºèª

---

## ğŸ” å¦‚æœæŸå€‹æ¬„ä½æ›´æ–°å¤±æ•—

å¦‚æœæŸå€‹æ¬„ä½æ›´æ–°å¤±æ•—ï¼Œå¯ä»¥å–®ç¨é‡æ–°åŸ·è¡Œè©²æ¬„ä½çš„ UPDATE èªå¥ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœ name æ›´æ–°å¤±æ•—ï¼Œé‡æ–°åŸ·è¡Œï¼š

```sql
UPDATE users u
SET name = p.name
FROM "PersonnelData" p
WHERE u.id = p.id;
```
